webpackJsonp([4],{"64DV":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("nJP2"),a=s.n(i),r=s("jM+Y"),n=s.n(r),l=s("J2gd"),o=s("xjzS"),c={name:"dragVerify",props:{isPassing:{type:Boolean,default:!1},width:{type:Number,default:250},height:{type:Number,default:40},text:{type:String,default:"swiping to the right side"},successText:{type:String,default:"success"},background:{type:String,default:"#eee"},progressBarBg:{type:String,default:"#76c61d"},completedBg:{type:String,default:"#76c61d"},circle:{type:Boolean,default:!1},radius:{type:String,default:"4px"},handlerIcon:{type:String},successIcon:{type:String},handlerBg:{type:String,default:"#fff"},textSize:{type:String,default:"14px"},textColor:{type:String,default:"#333"},imgsrc:{type:String},barWidth:{type:Number,default:70},barHeight:{type:Number,default:40},barRadius:{type:Number,default:2},showRefresh:{type:Boolean,default:!1},refreshIcon:{type:String},showTips:{type:Boolean,default:!0},successTip:{type:String,default:"验证通过，超过80%用户"},failTip:{type:String,default:"验证未通过，拖动滑块将悬浮图像正确合并"},diffWidth:{type:Number,default:20}},mounted:function(){var t=this.$refs.dragVerify;t.style.setProperty("--textColor",this.textColor),t.style.setProperty("--width",Math.floor(this.width/2)+"px"),t.style.setProperty("--pwidth",-Math.floor(this.width/2)+"px")},computed:{handlerStyle:function(){return{left:"0px",width:this.height+"px",height:this.height+"px",background:this.handlerBg}},message:function(){return this.isPassing?"":this.text},successMessage:function(){return this.isPassing?this.successText:""},dragVerifyStyle:function(){return console.log(this.width,"width"),{width:this.width+"px",height:this.height+"px",lineHeight:this.height+"px",background:this.background,borderRadius:this.circle?this.height/2+"px":this.radius}},dragVerifyImgStyle:function(){return{width:this.width+"px",position:"relative",overflow:"hidden"}},progressBarStyle:function(){return{background:this.progressBarBg,height:this.height+"px",borderRadius:this.circle?this.height/2+"px 0 0 "+this.height/2+"px":this.radius}},textStyle:function(){return{height:this.height+"px",width:this.width+"px",fontSize:this.textSize}}},data:function(){return{isMoving:!1,x:0,isOk:!1,isKeep:!1,movebarStyle:{},clipbarStyle:{},showBar:!1,clipBarx:0,showErrorTip:!1}},methods:{checkimgLoaded:function(){var t=this.barWidth,e=this.barHeight,s=this.$refs.checkImg.height,i=Math.floor(this.width/2),a=i+Math.ceil(Math.random()*(i-t)),r=25+Math.floor(Math.random()*(s-e-25-20));this.clipbarStyle={width:t+"px",height:e+"px",top:r+"px",left:a+"px","border-radius":this.barRadius+"px"},this.clipBarx=a;var n=this.imgsrc,l=this.width;this.movebarStyle={background:"url("+n+")","background-position":"-"+a+"px -"+r+"px","background-size":l+"px",width:t+"px",height:e+"px",top:r+"px",left:"0px","border-radius":this.barRadius+"px"}},dragStart:function(t){if(!this.isPassing){this.isMoving=!0;var e=this.$refs.handler;this.x=(t.pageX||t.touches[0].pageX)-parseInt(e.style.left.replace("px",""),10)}this.showBar=!0,this.showErrorTip=!1,this.$emit("handlerMove")},dragMoving:function(t){if(this.isMoving&&!this.isPassing){var e=(t.pageX||t.touches[0].pageX)-this.x;this.$refs.handler.style.left=e+"px",this.$refs.progressBar.style.width=e+this.height/2+"px",this.$refs.moveBar.style.left=e+"px"}},dragFinish:function(t){if(this.isMoving&&!this.isPassing){var e=(t.pageX||t.changedTouches[0].pageX)-this.x;if(Math.abs(e-this.clipBarx)>this.diffWidth){this.isOk=!0;var s=this;setTimeout(function(){s.$refs.handler.style.left="0",s.$refs.progressBar.style.width="0",s.$refs.moveBar.style.left="0",s.isOk=!1},500),this.showErrorTip=!0,this.$emit("passfail")}else this.passVerify();this.isMoving=!1}},passVerify:function(){var t=this;this.$emit("update:isPassing",!0),this.isMoving=!1,this.$refs.handler.children[0].className=this.successIcon,this.$refs.progressBar.style.background=this.completedBg,this.$refs.message.style["-webkit-text-fill-color"]="unset",this.$refs.message.style.animation="slidetounlock2 3s infinite",this.$refs.progressBar.style.color="#fff",this.$refs.progressBar.style.fontSize=this.textSize,this.isKeep=!0,setTimeout(function(){t.$refs.moveBar.style.left=t.clipBarx+"px",setTimeout(function(){t.isKeep=!1},200)},100),this.$emit("passcallback")},reset:function(){this.reImg(),this.checkimgLoaded()},reImg:function(){this.$emit("update:isPassing",!1);var t=this.$options.data();for(var e in t)t.hasOwnProperty(e)&&this.$set(this,e,t[e]);var s=this.$refs.handler,i=this.$refs.message;s.style.left="0",this.$refs.progressBar.style.width="0",s.children[0].className=this.handlerIcon,i.style["-webkit-text-fill-color"]="transparent",i.style.animation="slidetounlock 3s infinite",i.style.color=this.background,this.$refs.moveBar.style.left="0px"},refreshimg:function(){this.$emit("refresh")}},watch:{imgsrc:{immediate:!1,handler:function(){this.reImg()}}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"drag-verify-container"},[s("div",{style:t.dragVerifyImgStyle},[s("img",{ref:"checkImg",staticStyle:{width:"100%"},attrs:{src:t.imgsrc,alt:""},on:{load:t.checkimgLoaded}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showBar,expression:"showBar"}],ref:"moveBar",staticClass:"move-bar",class:{goFirst:t.isOk,goKeep:t.isKeep},style:t.movebarStyle}),t._v(" "),s("div",{ref:"clipBar",staticClass:"clip-bar",style:t.clipbarStyle}),t._v(" "),t.showRefresh&&!this.isPassing?s("div",{staticClass:"refresh"},[s("i",{class:t.refreshIcon,on:{click:t.refreshimg}})]):t._e(),t._v(" "),t.showTips&&t.isPassing?s("div",{staticClass:"tips success"},[t._v(t._s(t.successTip))]):t._e(),t._v(" "),t.showTips&&!t.isPassing&&t.showErrorTip?s("div",{staticClass:"tips danger"},[t._v(t._s(t.failTip))]):t._e()]),t._v(" "),s("div",{ref:"dragVerify",staticClass:"drag_verify",style:t.dragVerifyStyle,on:{mousemove:t.dragMoving,mouseup:t.dragFinish,mouseleave:t.dragFinish,touchmove:t.dragMoving,touchend:t.dragFinish}},[s("div",{ref:"progressBar",staticClass:"dv_progress_bar",class:{goFirst2:t.isOk},style:t.progressBarStyle},[t._v("\n      "+t._s(t.successMessage)+"\n    ")]),t._v(" "),s("div",{ref:"message",staticClass:"dv_text",style:t.textStyle},[t._v("\n      "+t._s(t.message)+"\n    ")]),t._v(" "),s("div",{ref:"handler",staticClass:"dv_handler dv_handler_bg",class:{goFirst:t.isOk},style:t.handlerStyle,on:{mousedown:t.dragStart,touchstart:t.dragStart}},[s("i",{class:t.handlerIcon})])])])},staticRenderFns:[]};var d=s("VU/8")(c,h,!1,function(t){s("XZ44"),s("uEyT")},"data-v-8047c284",null).exports,u=s("qgrf"),p={name:"DragImgComponentApi",components:{LComponentNote:l.a,LComponentDemo:o.a,dragVerifyImg:d,menus:u.a},methods:{reset:function(){this.$refs.sss.reset()},reimg:function(){this.img=this.img==this.t3?this.t2:this.t3},pass:function(){this.$message({message:"验证通过",type:"success"})},passcallback:function(){this.$message({message:"验证通过",type:"success"})},handleFail:function(){var t=this;this.value&&setTimeout(function(){t.$refs.sss.reset()},500)}},data:function(){return{t2:a.a,t3:n.a,img:n.a,isPassing:!1,value:!1,buttonCode1:'<el-row>\n  <drag-verify-img \n    ref="sss"\n    :imgsrc="t3"\n    :isPassing.sync="isPassing"\n    :showRefresh="true"\n    text="请按住滑块拖动"\n    successText="验证通过"\n    handlerIcon="el-icon-d-arrow-right"\n    successIcon="el-icon-circle-check"\n    @refresh="reimg"\n    @passcallback="pass"\n    @passfail="handleFail"\n  >\n  </drag-verify-img>\n  <label for="">验证失败自动更新滑块位置</label>\n  <el-switch\n    v-model="value"\n  >\n  </el-switch>\n  <el-button type="primary" @click="reset">还原</el-button>\n</el-row>\n\n<script>\n  export default{\n    methods:{\n      handleFail() {\n        if(this.value){\n          setTimeout(()=>{\n            this.$refs.sss.reset();\n          },500)\n        }\n      },\n    }\n  }\n<\/script>',columnData1:[{prop:"attribute",label:"参数",width:"120"},{prop:"desc",label:"说明",width:"200"},{prop:"type",label:"类型",width:"80"},{prop:"value",label:"可选值"},{prop:"default",label:"默认值",width:"200"}],tableData1:[{attribute:"isPassing",desc:"验证状态(支持.sync)",type:"boolean",value:"true / false",default:"-"},{attribute:"width",desc:"宽度",type:"number",value:"-",default:"250"},{attribute:"height",desc:"高度",type:"number",value:"-",default:"40"},{attribute:"text",desc:"初始文字",type:"string",value:"-",default:"swiping to the right side"},{attribute:"successText",desc:"成功提示文字",type:"string",value:"-",default:"success"},{attribute:"background",desc:"滑块右侧背景色",type:"string",value:"#eee / red / rgba(52,52,52,0.7)",default:"#eee"},{attribute:"progressBarBg",desc:"滑块左侧背景色",type:"string",value:"#76c61d / white / rgba(52,52,52,0.7)",default:"#76c61d"},{attribute:"handlerBg",desc:"滑块背景色",type:"string",value:"#fff / white / rgb(255,255,255)",default:"#fff"},{attribute:"completedBg",desc:"验证通过背景色",type:"string",value:"#76c61d / white / rgba(52,52,52,0.7)",default:"#76c61d"},{attribute:"circle",desc:"两侧是否圆形",type:"boolean",value:"true / false",default:"false"},{attribute:"radius",desc:"圆角",type:"string",value:"4px / 4%",default:"4px"},{attribute:"handlerIcon",desc:"滑块未验证通过时的图标,根据所选框架设置不同class",type:"string",value:"el-icon-d-arrow-right",default:"-"},{attribute:"successIcon",desc:"滑块验证通过时的图标,根据所选框架设置不同class",type:"string",value:"el-icon-circle-check",default:"-"},{attribute:"textSize",desc:"文字大小",type:"string",value:"14px / 4em",default:"14px"},{attribute:"textColor",desc:"文字颜色",type:"string",value:"#333 / gray / rgb(52,52,52)",default:"#333"},{attribute:"imgsrc",desc:"图片地址",type:"string",value:"-",default:"-"},{attribute:"barWidth",desc:"拼图宽度",type:"number",value:"70",default:"70"},{attribute:"barHeight",desc:"拼图高度",type:"number",value:"40",default:"40"},{attribute:"barRadius",desc:"拼图圆角",type:"number",value:"2",default:"2"},{attribute:"showRefresh",desc:"是否右上角显示刷新",type:"boolean",value:"true / false",default:"false"},{attribute:"refreshIcon",desc:"刷新按钮图标的class",type:"string",value:"el-icon-refresh-right",default:"-"},{attribute:"showTips",desc:"是否显示底部提示",type:"boolean",value:"true / false",default:"true"},{attribute:"successTip",desc:"底部验证通过提示",type:"string",value:"验证通过",default:"验证通过，超过80%用户"},{attribute:"failTip",desc:"底部验证失败提示",type:"string",value:"验证失败",default:"验证失败，拖动滑块将悬浮图像正确合并"},{attribute:"diffWidth",desc:"在此范围内松开计算验证成功(单位px)",type:"number",value:"10",default:"20"}],columnData3:[{prop:"方法名",label:"方法名",width:"120"},{prop:"说明",label:"说明"},{prop:"参数",label:"参数",width:"120"}],tableData3:[{"方法名":"reset","说明":"还原未验证通过时的状态","参数":"-"}],columnData4:[{prop:"方法名",label:"方法名",width:"120"},{prop:"说明",label:"说明"},{prop:"参数",label:"参数",width:"120"}],tableData4:[{"方法名":"refresh","说明":"点击刷新回调","参数":"-"},{"方法名":"passcallback","说明":"验证通过回调","参数":"-"},{"方法名":"passfail","说明":"验证失败回调","参数":"-"}]}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{staticClass:"main"},[s("menus",{attrs:{index:2}}),t._v(" "),s("el-col",{staticClass:"title",attrs:{span:24}},[t._v("图片滑块验证")]),t._v(" "),s("el-col",{staticClass:"subtitle",attrs:{span:24}},[t._v("基于vue-drag-verify二次开发的vue组件。需对父元素或html设置"),s("b",[t._v("user-select: none")])]),t._v(" "),s("el-col",{attrs:{span:24}},[s("l-component-demo",{attrs:{title:"基础用法",subtitle:"基础的滑块用法。",code:t.buttonCode1}},[s("div",{attrs:{slot:"source"},slot:"source"},[s("el-row",{staticStyle:{"text-align":"center"}},[s("drag-verify-img",{ref:"sss",attrs:{imgsrc:t.img,isPassing:t.isPassing,showRefresh:!0,barWidth:70,barHeight:40,text:"请按住滑块拖动",successText:"验证通过",handlerIcon:"el-icon-d-arrow-right",successIcon:"el-icon-circle-check",refreshIcon:"el-icon-refresh-right"},on:{"update:isPassing":function(e){t.isPassing=e},"update:is-passing":function(e){t.isPassing=e},refresh:t.reimg,passcallback:t.pass,passfail:t.handleFail}}),t._v(" "),s("div",{staticStyle:{float:"left","text-align":"left",color:"#fff","font-size":"12px","margin-top":"10px"}},[s("label",{attrs:{for:""}},[t._v("验证失败自动更新滑块位置")]),t._v(" "),s("el-switch",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.reset}},[t._v("还原")])],1)],1),t._v(" "),s("div",{attrs:{slot:"description"},slot:"description"},[t._v("\n          使用"),s("code",[t._v("width")]),t._v("、"),s("code",[t._v("height")]),t._v("、"),s("code",[t._v("text")]),t._v("、"),s("code",[t._v("background")]),t._v("和"),s("code",[t._v("textColor")]),t._v("等属性调整组件。\n        ")])])],1),t._v(" "),s("el-col",{attrs:{span:24}},[s("l-component-note",{attrs:{title:"Attributes",columnData:t.columnData1,tableData:t.tableData1}})],1),t._v(" "),s("el-col",{attrs:{span:24}},[s("l-component-note",{attrs:{title:"Methods",columnData:t.columnData3,tableData:t.tableData3}})],1),t._v(" "),s("el-col",{attrs:{span:24}},[s("l-component-note",{attrs:{title:"Events",columnData:t.columnData4,tableData:t.tableData4}})],1)],1)],1)},staticRenderFns:[]};var g={name:"DragVerifyImg",data:function(){return{msg:""}},components:{DragImgComponentApi:s("VU/8")(p,f,!1,function(t){s("Ta9j")},"data-v-6ac9c5e5",null).exports}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-row",[e("drag-img-component-api")],1),this._v(" "),e("el-backtop")],1)},staticRenderFns:[]};var m=s("VU/8")(g,v,!1,function(t){s("zOsK")},"data-v-56c01853",null);e.default=m.exports},Ta9j:function(t,e){},XZ44:function(t,e){},uEyT:function(t,e){},zOsK:function(t,e){}});